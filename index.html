<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
    <title>Zikr & Vocabulary</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="loader">
        <h3 style="margin-bottom:10px">Yuklanmoqda...</h3>
        <p style="font-size:12px; opacity:0.6" id="loader-msg">Xavfsiz ulanish</p>
    </div>

    <div id="page-home" class="page active">
        <h2 id="welcome-text" style="text-align:center">Assalomu alaykum</h2>
        <div class="card" onclick="navTo('page-create')" style="color:var(--primary); font-weight:bold; cursor:pointer; border: 2px dashed var(--primary); background: transparent;">
            + Yangi maqsad
        </div>
        <div id="list-container" style="width:100%"></div>
    </div> 
    
    <div id="page-create" class="page">
        <h2>Yangi Reja</h2>
        <input type="text" id="inp-name" placeholder="Nomi (masalan: Istig'for)">
        <input type="number" id="inp-total" placeholder="Jami soni (100)" oninput="calcDaily()">
        <input type="number" id="inp-days" placeholder="Kunlar (10)" oninput="calcDaily()">
        <div style="width:100%; text-align:center; margin:10px 0; opacity:0.8; font-size:14px">Kuniga: <b id="lbl-daily">0</b> ta</div>
        <button class="btn" onclick="createItem()">Boshlash</button>
        <button class="btn" style="background:transparent; color:var(--text); border:1px solid var(--border)" onclick="navTo('page-home')">Bekor qilish</button>
    </div> 
    
    <div id="page-days" class="page">
        <div class="header-nav">
            <span class="back-btn" onclick="navTo('page-home')">‚¨ÖÔ∏è</span>
            <h3 id="days-title" style="margin:0">Kunlar</h3>
        </div>
        <div id="days-container" style="width:100%"></div>
    </div> 
    
    <div id="page-view" class="page">
        <div style="width:100%; flex-shrink: 0;">
            <div class="header-nav">
                <span class="back-btn" onclick="closeView()">‚¨ÖÔ∏è</span>
                <div style="flex:1"></div>
            </div>
            <p style="text-align:center; opacity:0.7; margin-bottom:5px">Bugungi reja: <b id="view-goal">0</b></p>
        </div>
        <div class="main-word-display" id="view-word-name">...</div>
        <div class="circle-wrapper" onclick="doCount()" id="circle-area">
            <div class="liquid-container" id="liq-container">
                <div class="wave wave-back"></div>
                <div class="wave wave-front"></div>
                <div class="liquid-body"></div>
            </div>
            <div class="glass-shine"></div>
        </div>
        <p style="text-align:center; font-size:12px; opacity:0.5; margin-bottom: 20px; flex-shrink: 0;">Sanash uchun bosing</p>
    </div> 
    
    <div id="page-stats" class="page">
        <h2>Statistika</h2>
        <div id="completed-container" style="width:100%"></div>
    </div> 
    
    <div id="page-detail" class="page">
        <div class="header-nav">
            <span class="back-btn" onclick="navTo('page-stats')">‚¨ÖÔ∏è</span>
            <h3 id="detail-title" style="margin:0">Statistika</h3>
        </div>
        <div class="card">
            <div style="font-size:12px; opacity:0.7">Vaqt:</div>
            <div style="font-size:24px; font-weight:bold; color:var(--primary)" id="detail-time">0 soat</div>
        </div>
        <div class="card" style="height: 250px;">
            <canvas id="timeChart"></canvas>
        </div>
        <button class="btn danger" onclick="deleteStatsItem()">üóë O'chirish</button>
    </div> 
    
    <div id="page-profile" class="page">
        <h2>Profil</h2>
        <div style="width:80px; height:80px; background:#ddd; border-radius:50%; margin:20px; display:flex; align-items:center; justify-content:center; font-size:30px; object-fit:cover; overflow:hidden">
             <img id="u-ava-img" src="" style="width:100%; height:100%; display:none">
             <span id="u-ava-ph">üë§</span>
        </div>
        <h3 id="u-name" style="margin-top:0; margin-bottom: 25px;">Foydalanuvchi</h3>
        <div class="profile-stats-row">
            <div class="p-stat-box">
                <div class="p-val" id="p-life-count">0</div>
                <div class="p-lbl">Jami</div>
            </div>
            <div class="p-stat-box">
                <div class="p-val" id="p-life-time">0m</div>
                <div class="p-lbl">Vaqt</div>
            </div>
        </div>
        <div class="settings-group">
            <div class="switch-row">
                <span style="font-size:17px">Tungi rejim üåô</span>
                <label class="switch">
                    <input type="checkbox" id="tg-dark" onchange="toggleDark()">
                    <span class="slider"></span>
                </label>
            </div>
            <div class="switch-row">
                <span style="font-size:17px">Vibratsiya üì≥</span>
                <label class="switch">
                    <input type="checkbox" id="tg-vib" onchange="toggleVib()">
                    <span class="slider"></span>
                </label>
            </div>
        </div>
    </div> 
    
    <div class="nav">
        <div class="nav-item active" onclick="navTo('page-home')">
            <svg viewBox="0 0 24 24"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
            <div class="nav-dot"></div>
        </div>
        <div class="nav-item" onclick="navTo('page-stats')">
            <svg viewBox="0 0 24 24"><line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line></svg>
            <div class="nav-dot"></div>
        </div>
        <div class="nav-item" onclick="navTo('page-profile')">
            <svg viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
            <div class="nav-dot"></div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
